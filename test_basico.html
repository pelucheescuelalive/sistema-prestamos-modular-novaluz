<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test B√°sico - Verificaci√≥n JavaScript</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .tab-btn { 
            background: #007bff; 
            color: white; 
            border: none; 
            padding: 10px 20px; 
            margin: 5px; 
            cursor: pointer; 
            border-radius: 5px;
        }
        .tab-btn.active { background: #0056b3; }
        .tab-content { 
            display: none; 
            padding: 20px; 
            border: 1px solid #ddd; 
            margin-top: 10px; 
        }
        .cliente-card {
            border: 1px solid #ddd;
            padding: 15px;
            margin: 10px;
            border-radius: 8px;
            background: white;
            display: inline-block;
            width: 300px;
        }
        .btn-ver, .btn-opciones {
            background: #28a745;
            color: white;
            border: none;
            padding: 5px 10px;
            margin: 5px;
            cursor: pointer;
            border-radius: 3px;
        }
        .rating-interactive {
            cursor: pointer;
            font-size: 20px;
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
        }
        .modal-content {
            background: white;
            margin: 50px auto;
            padding: 20px;
            width: 400px;
            border-radius: 8px;
        }
        .opciones-menu {
            position: absolute;
            background: white;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            z-index: 1000;
            display: none;
        }
        .opciones-menu.active { display: block; }
        .opcion-item {
            padding: 10px 15px;
            cursor: pointer;
            border-bottom: 1px solid #eee;
        }
        .opcion-item:hover { background: #f5f5f5; }
    </style>
</head>
<body>
    <h1>üß™ Test B√°sico de JavaScript</h1>
    
    <div id="console-log" style="background: #f0f0f0; padding: 15px; margin: 15px 0; border-radius: 5px; font-family: monospace;"></div>
    
    <h2>Navegaci√≥n de Tabs</h2>
    <div>
        <button class="tab-btn active" onclick="showTab('dashboard')">üìä Dashboard</button>
        <button class="tab-btn" onclick="showTab('clientes')">üë• Clientes</button>
        <button class="tab-btn" onclick="showTab('prestamos')">üíº Pr√©stamos</button>
    </div>
    
    <div id="tab-dashboard" class="tab-content" style="display: block;">
        <h3>Dashboard</h3>
        <p>Estad√≠sticas del sistema</p>
    </div>
    
    <div id="tab-clientes" class="tab-content">
        <h3>Clientes</h3>
        <div id="clientes-gallery">
            <div class="cliente-card">
                <h4>Mar√≠a Elena Rodr√≠guez</h4>
                <p>809-555-1234</p>
                <div class="rating-interactive" onclick="mostrarRatingModal('CLI001')">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                <br>
                <button class="btn-ver" onclick="abrirModalCliente('CLI001')">üëÅÔ∏è Ver</button>
                <button class="btn-opciones" onclick="mostrarOpcionesCliente('CLI001', event)">‚ãÆ OPCIONES</button>
            </div>
            
            <div class="cliente-card">
                <h4>Juan Carlos M√©ndez</h4>
                <p>809-555-5678</p>
                <div class="rating-interactive" onclick="mostrarRatingModal('CLI002')">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                <br>
                <button class="btn-ver" onclick="abrirModalCliente('CLI002')">üëÅÔ∏è Ver</button>
                <button class="btn-opciones" onclick="mostrarOpcionesCliente('CLI002', event)">‚ãÆ OPCIONES</button>
            </div>
        </div>
    </div>
    
    <div id="tab-prestamos" class="tab-content">
        <h3>Pr√©stamos</h3>
        <p>Lista de pr√©stamos activos</p>
    </div>
    
    <!-- Modal de Cliente -->
    <div id="modal-cliente" class="modal">
        <div class="modal-content">
            <h3>Informaci√≥n del Cliente</h3>
            <p id="modal-info">Informaci√≥n del cliente aqu√≠</p>
            <button onclick="cerrarModalCliente()">Cerrar</button>
        </div>
    </div>
    
    <!-- Modal de Rating -->
    <div id="modal-rating" class="modal">
        <div class="modal-content">
            <h3>Calificar Cliente</h3>
            <div style="font-size: 30px; text-align: center; margin: 20px 0;">
                <span onclick="aplicarRating(1)" style="cursor: pointer;">‚≠ê</span>
                <span onclick="aplicarRating(2)" style="cursor: pointer;">‚≠ê</span>
                <span onclick="aplicarRating(3)" style="cursor: pointer;">‚≠ê</span>
                <span onclick="aplicarRating(4)" style="cursor: pointer;">‚≠ê</span>
                <span onclick="aplicarRating(5)" style="cursor: pointer;">‚≠ê</span>
            </div>
            <button onclick="cerrarModalRating()">Cancelar</button>
        </div>
    </div>
    
    <!-- Men√∫ de Opciones -->
    <div id="opciones-menu" class="opciones-menu">
        <div class="opcion-item" onclick="editarCliente()">‚úèÔ∏è Editar Cliente</div>
        <div class="opcion-item" onclick="verPrestamos()">üíº Ver Pr√©stamos</div>
        <div class="opcion-item" onclick="crearPrestamo()">‚ûï Crear Pr√©stamo</div>
        <div class="opcion-item" onclick="eliminarCliente()">üóëÔ∏è Eliminar Cliente</div>
    </div>

    <script>
        let currentClienteId = null;
        
        function log(message) {
            console.log(message);
            const logDiv = document.getElementById('console-log');
            logDiv.innerHTML += new Date().toLocaleTimeString() + ': ' + message + '<br>';
        }
        
        // Funci√≥n principal de navegaci√≥n
        function showTab(tabName) {
            try {
                log('Cambiando a tab: ' + tabName);
                
                // Remover clase activa de todos los botones
                document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
                
                // Ocultar todos los contenidos
                document.querySelectorAll('.tab-content').forEach(content => content.style.display = 'none');
                
                // Activar el bot√≥n correspondiente
                const buttons = document.querySelectorAll('.tab-btn');
                buttons.forEach(btn => {
                    if (btn.getAttribute('onclick') === `showTab('${tabName}')`) {
                        btn.classList.add('active');
                    }
                });
                
                // Mostrar el contenido correspondiente
                const tabContent = document.getElementById(`tab-${tabName}`);
                if (tabContent) {
                    tabContent.style.display = 'block';
                    log('‚úÖ Tab cambiado correctamente a: ' + tabName);
                } else {
                    log('‚ùå Tab no encontrado: tab-' + tabName);
                }
                
            } catch (error) {
                log('‚ùå Error en showTab: ' + error.message);
            }
        }
        
        // Sistema de calificaciones
        function mostrarRatingModal(clienteId) {
            log('‚≠ê Abriendo modal de rating para: ' + clienteId);
            currentClienteId = clienteId;
            document.getElementById('modal-rating').style.display = 'block';
        }
        
        function cerrarModalRating() {
            log('Cerrando modal de rating');
            document.getElementById('modal-rating').style.display = 'none';
            currentClienteId = null;
        }
        
        function aplicarRating(rating) {
            log('Aplicando rating ' + rating + ' estrellas al cliente ' + currentClienteId);
            alert('‚úÖ Calificaci√≥n de ' + rating + ' estrellas aplicada al cliente ' + currentClienteId);
            cerrarModalRating();
        }
        
        // Modal de cliente
        function abrirModalCliente(clienteId) {
            log('üëÅÔ∏è Abriendo modal de cliente: ' + clienteId);
            currentClienteId = clienteId;
            document.getElementById('modal-info').textContent = 'Informaci√≥n del cliente ' + clienteId;
            document.getElementById('modal-cliente').style.display = 'block';
        }
        
        function cerrarModalCliente() {
            log('Cerrando modal de cliente');
            document.getElementById('modal-cliente').style.display = 'none';
            currentClienteId = null;
        }
        
        // Men√∫ de opciones
        function mostrarOpcionesCliente(clienteId, event) {
            log('‚öôÔ∏è Mostrando opciones para cliente: ' + clienteId);
            currentClienteId = clienteId;
            
            const menu = document.getElementById('opciones-menu');
            const rect = event.target.getBoundingClientRect();
            
            menu.style.top = (rect.bottom + window.scrollY + 5) + 'px';
            menu.style.left = (rect.left + window.scrollX) + 'px';
            menu.classList.add('active');
            
            // Cerrar men√∫ al hacer clic fuera
            setTimeout(() => {
                document.addEventListener('click', function closeMenu(e) {
                    if (!menu.contains(e.target) && !e.target.classList.contains('btn-opciones')) {
                        menu.classList.remove('active');
                        document.removeEventListener('click', closeMenu);
                    }
                });
            }, 100);
        }
        
        // Funciones del men√∫ de opciones
        function editarCliente() {
            log('‚úèÔ∏è Editando cliente: ' + currentClienteId);
            document.getElementById('opciones-menu').classList.remove('active');
            alert('Editando cliente ' + currentClienteId);
        }
        
        function verPrestamos() {
            log('üíº Viendo pr√©stamos del cliente: ' + currentClienteId);
            document.getElementById('opciones-menu').classList.remove('active');
            showTab('prestamos');
            alert('Pr√©stamos del cliente ' + currentClienteId);
        }
        
        function crearPrestamo() {
            log('‚ûï Creando pr√©stamo para cliente: ' + currentClienteId);
            document.getElementById('opciones-menu').classList.remove('active');
            showTab('prestamos');
            alert('Creando pr√©stamo para cliente ' + currentClienteId);
        }
        
        function eliminarCliente() {
            log('üóëÔ∏è Eliminando cliente: ' + currentClienteId);
            document.getElementById('opciones-menu').classList.remove('active');
            if (confirm('¬øEst√° seguro de eliminar al cliente ' + currentClienteId + '?')) {
                alert('Cliente ' + currentClienteId + ' eliminado');
            }
        }
        
        // Inicializaci√≥n
        window.onload = function() {
            log('üöÄ Sistema de test b√°sico inicializado');
        };
        
    </script>
</body>
</html>
